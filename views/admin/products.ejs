<%- include ('layout/header.ejs')%>

        
        <section class="content-main 2">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Products</h2>
                </div>
                <div>
                    <button class="btn btn-primary"><a href="/admin/addProduct" style="text-decoration:none; color: white;">Add Product</a></button>
                </div>
            </div>
            <div class="card mb-4">
                <!-- <header class="card-header">
                    <div class="row gx-3">
                        <div class="col-lg-4 col-md-6 me-auto">
                            <input type="text" placeholder="Search..." class="form-control">
                        </div>
                    </div>
                </header> card-header end// -->
                <div class="card-body">
                        <div class="row product d-flex  gap-5 ps-5">
                        <% if(locals.products) { for(let i = 0 ; i < locals.products.length ; i++) { %>
                            <% let desc = locals.products[i].description.split('.')[0] %>
                            <% let pname = locals.products[i].productname.split(' ')[0] %>
                                <div class="card my-4 col-md-3">
                                    <a href=""><img src="/images/<%= locals.products[i].mainimage %>" class="card-img-top" style="aspect-ratio:1/1;" alt="..."></a>
                                    <div class="card-body">
                                      <h5 class="card-title cardhead"><%= pname %></h5>
                                      <div class="carddesc"><p class="card-text"><%= desc %></p></div>
                                      <br>
                                      <div class="cardprice mb-4"><div><a href="/admin/editProduct?id=<%= locals.products[i]._id %>">Edit</a></div>
                                      <% if(locals.products[i].isBlocked === 0) { %>
                                        <div><button class="btn btn-sm btn-brand rounded font-sm mt-15 unlistbtn"  data-uid="<%= locals.products[i]._id%>">Unlist</button></div>
                                      <%} else { %>
                                        <div><button class="btn btn-sm btn-brand rounded font-sm mt-15 listbtn"  data-uid="<%= locals.products[i]._id%>">List</button></div>
                                      <% } %>
                                    </div>
                                      <% if(locals.products[i].stock === 0) { %>
                                        <div class="stockbadge1">Out of Stock</div>
                                    <% } else {%>
                                        <div class="stockbadge2">Stock : <%= locals.products[i].stock %></div>
                                    <% } %>
                                    </div>
                                    
                                </div>
                                <% } }else{ %>
                                    <h4>No Products to Show</h4>
                                <% } %>
                            </div>
                    <!-- </div>  -->
                </div> <!-- card-body end// -->
            </div> <!-- card end// -->
            <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <% if(currentPage > 1) { %>
                        <a class="btn" href="/admin/products?page=<%= currentPage - 1 %>">Previous</a>
                    <% } %>
            
                    <% for(let i = 1; i <= totalPages; i++) { %>
                        <a class="btn <%= currentPage === i ? 'btn-primary' : '' %>" href="/admin/products?page=<%= i %>"><%= i %></a>
                    <% } %>
            
                    <% if(currentPage < totalPages) { %>
                        <a class="btn" href="/admin/products?page=<%= currentPage + 1 %>">Next</a>
                    <% } %>
                </nav>
            </div>
        </section>
        
<script src="/public/js/product.js"></script>
<script src="/public/js/productListUnlist.js"></script>


<%- include('layout/footer.ejs') %>

